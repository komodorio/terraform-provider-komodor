---
page_title: "komodor_policy Resource - terraform-provider-komodor"
subcategory: ""
description: |-
  Creates a Komodor RBAC Policy
---

# komodor_policy (Resource)

Creates a Komodor RBAC Policy

## Example Usage

```terraform
resource "komodor_policy" "my-policy" {
  name       = "my-policy"
  statements = <<EOF
[{
  "actions": [
    "get:daemonset",
    "edit:cronjob",
    "delete:service",
    "edit:job"
  ],
  "resources": [{
    "cluster": "kind-kind",
    "namespaces": [
      "default",
      "komodor"
    ]
  }]
}]
EOF
}
```

### Dyanmic Tags

```terraform
# This example shows how to create a policy with dynamic tags.
# Dynamic tags feature is not available by default.
# When the feature is disabled, applying this policy will fail with error: `400 Bad Request`

resource "komodor_policy" "komo-example-dynamic-tags-policy" {
  name = "komo-example-dynamic-tags-policy"
  type = "dynamic_tag"
  tags = {
    "team" : "super-heroes"
  }
  statements = <<EOF
[{
  "actions": [
    "view:all"
  ],
  "resources": []
}]
EOF
}
```

### Wildcard Namespace

```terraform
# This example shows how to create a policy with a wildcard namespace pattern.
# wildcard policy type is not available by default.
# When the feature is disabled, applying this policy will fail with error: `400 Bad Request`

resource "komodor_policy" "komo-example-wildcard-policy" {
  name       = "komo-example-wildcard-policy"
  type       = "wildcard"
  statements = <<EOF
[{
  "actions": [
    "view:all"
  ],
  "resources": [{
    "cluster": "komo-example-cluster",
    "namespacePattern": "prod-*"
  }]
}]
EOF
}
```

### With komodor_action

```terraform
resource "komodor_action" "komo-example-pod-viewer" {
  action      = "pod-viewer"
  description = "View pods"
  ruleset     = <<EOF
[
  {
    "apiGroups": [
      "apps"
    ],
    "resources": [
      "pods"
    ],
    "verbs": [
      "get",
      "list"
    ]
  }
]
EOF
}

resource "komodor_policy" "komo-example-policy" {
  name       = "komo-example-policy"
  statements = <<EOF
[{
  "actions": [
    "${komodor_action.komo-example-pod-viewer.action}"
  ],
  "resources": [{
    "cluster": "komo-example-cluster",
    "namespaces": [
      "default",
      "kube-system"
    ]
  }]
}]
EOF
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String)
- `statements` (String)

### Optional

- `tags` (Map of String)
- `type` (String)

### Read-Only

- `created_at` (String)
- `id` (String) The ID of this resource.
- `updated_at` (String)
